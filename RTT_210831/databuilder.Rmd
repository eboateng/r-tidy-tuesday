---
title: "R Notebook"
output: html_notebook
---

```{r}
tuesdata <- tidytuesdayR::tt_load('2021-08-31')
tuesdata <- tidytuesdayR::tt_load(2021, week = 36)
bird_baths <- tuesdata$bird_baths
```


```{r}
library(plotly)
library(tidyverse)

df <- na.omit(bird_baths)
```
```{r Urban Rural chart ETL}
urbanrural <- df %>%
  group_by(survey_year, urban_rural) %>%
  summarise(count = n()) %>%
  spread(urban_rural, count)

urbanrural$survey_year <- as.factor(urbanrural$survey_year)

fig <- plot_ly(urbanrural, x = ~Rural, y = ~survey_year, type = 'bar', orientation = 'h', name = 'Rural',
        marker = list(color = 'rgba(42, 157, 143, 0.6)',
                      line = list(color = 'rgba(42, 157, 143, 1.0)', width = 3)))

fig <- fig %>% add_trace(x = ~Urban, name = 'Urban',
            marker = list(color = 'rgba(233, 196, 106, 0.6)',
                          line = list(color = 'rgba(233, 196, 106, 1.0)', width = 3)))

fig <- fig %>% layout(barmode = 'stack',
         xaxis = list(title = "Birds sighted"),
         yaxis = list(title ="Survey Year"))

fig

```


